<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FWI Forest Weather Index Predictor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'forest': {
                            50: '#f0fdf4',
                            100: '#dcfce7',
                            500: '#22c55e',
                            600: '#16a34a',
                            700: '#15803d',
                        },
                        'fire': {
                            50: '#fef2f2',
                            100: '#fee2e2',
                            500: '#ef4444',
                            600: '#dc2626',
                            700: '#b91c1c',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        @keyframes gradient {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        .animate-gradient {
            background-size: 200% 200%;
            animation: gradient 15s ease infinite;
        }
        @keyframes pulse-fire {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.9; transform: scale(1.05); }
        }
        .pulse-fire {
            animation: pulse-fire 2s ease-in-out infinite;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 animate-gradient min-h-screen">
    
    <!-- Header -->
    <header class="relative overflow-hidden">
        <div class="absolute inset-0 bg-gradient-to-r from-emerald-500/20 to-blue-500/20 backdrop-blur-sm"></div>
        <div class="relative container mx-auto px-4 py-16 text-center">
            <div class="inline-block p-4 bg-gradient-to-r from-orange-500 to-red-500 rounded-full mb-4 shadow-lg shadow-orange-500/50">
                <i class="fas fa-fire text-4xl text-white"></i>
            </div>
            <h1 class="text-5xl md:text-6xl font-bold text-white mb-4">
                FWI Predictor
            </h1>
            <p class="text-xl text-slate-300 max-w-2xl mx-auto">
                Advanced Forest Weather Index & Fire Risk Assessment System
            </p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8 max-w-7xl">
        
        <!-- Message Alert -->
        <div id="message" class="mb-6"></div>

        <div class="grid lg:grid-cols-2 gap-8">
            
            <!-- Input Section -->
            <div class="space-y-6">
                <div class="bg-white/10 backdrop-blur-md rounded-2xl p-6 shadow-2xl border border-white/20">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="p-3 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg">
                            <i class="fas fa-cloud-sun text-2xl text-white"></i>
                        </div>
                        <h2 class="text-2xl font-bold text-white">Weather Parameters</h2>
                    </div>

                    <!-- Environmental Conditions -->
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold text-cyan-300 mb-4 flex items-center gap-2">
                            <i class="fas fa-thermometer-half"></i>
                            Environmental Conditions
                        </h3>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-slate-300 mb-2">
                                    <i class="fas fa-temperature-high text-orange-400"></i> Temperature (Â°C)
                                </label>
                                <input type="number" id="temperature" step="0.1" placeholder="e.g. 25.5"
                                    class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-300 mb-2">
                                    <i class="fas fa-tint text-blue-400"></i> Relative Humidity (%)
                                </label>
                                <input type="number" id="rh" step="0.1" min="0" max="100" placeholder="e.g. 65.2"
                                    class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-300 mb-2">
                                    <i class="fas fa-wind text-teal-400"></i> Wind Speed (km/h)
                                </label>
                                <input type="number" id="ws" step="0.1" min="0" placeholder="e.g. 12.3"
                                    class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-300 mb-2">
                                    <i class="fas fa-cloud-rain text-indigo-400"></i> Rainfall (mm)
                                </label>
                                <input type="number" id="rain" step="0.01" min="0" placeholder="e.g. 2.5"
                                    class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition">
                            </div>
                        </div>
                    </div>

                    <!-- FWI Components -->
                    <div>
                        <h3 class="text-lg font-semibold text-emerald-300 mb-4 flex items-center gap-2">
                            <i class="fas fa-chart-line"></i>
                            Fire Weather Index Components
                        </h3>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-slate-300 mb-2">
                                    <i class="fas fa-leaf text-green-400"></i> FFMC
                                </label>
                                <input type="number" id="ffmc" step="0.1" placeholder="e.g. 85.5"
                                    class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-300 mb-2">
                                    <i class="fas fa-seedling text-lime-400"></i> DMC
                                </label>
                                <input type="number" id="dmc" step="0.1" placeholder="e.g. 26.2"
                                    class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-300 mb-2">
                                    <i class="fas fa-tree text-emerald-400"></i> DC
                                </label>
                                <input type="number" id="dc" step="0.1" placeholder="e.g. 94.8"
                                    class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-300 mb-2">
                                    <i class="fas fa-fire-flame-curved text-orange-400"></i> ISI
                                </label>
                                <input type="number" id="isi" step="0.1" placeholder="e.g. 5.1"
                                    class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition">
                            </div>
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium text-slate-300 mb-2">
                                    <i class="fas fa-layer-group text-yellow-400"></i> BUI
                                </label>
                                <input type="number" id="bui" step="0.1" placeholder="e.g. 38.7"
                                    class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition">
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex flex-col sm:flex-row gap-4 mt-8">
                        <button onclick="trainModels()" 
                            class="flex-1 bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white font-semibold py-4 px-6 rounded-xl shadow-lg shadow-emerald-500/50 hover:shadow-emerald-600/50 transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2">
                            <i class="fas fa-brain"></i>
                            Train Models
                        </button>
                        <button onclick="makePrediction()" 
                            class="flex-1 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white font-semibold py-4 px-6 rounded-xl shadow-lg shadow-blue-500/50 hover:shadow-blue-600/50 transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2">
                            <i class="fas fa-calculator"></i>
                            Predict Risk
                        </button>
                    </div>
                </div>
            </div>

            <!-- Results Section -->
            <div class="space-y-6">
                <div class="bg-white/10 backdrop-blur-md rounded-2xl p-6 shadow-2xl border border-white/20">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="p-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg">
                            <i class="fas fa-chart-pie text-2xl text-white"></i>
                        </div>
                        <h2 class="text-2xl font-bold text-white">Prediction Results</h2>
                    </div>

                    <!-- Results Content -->
                    <div id="results" class="hidden">
                        <!-- FWI Card -->
                        <div class="bg-gradient-to-br from-orange-500/20 to-red-500/20 backdrop-blur-sm rounded-2xl p-6 mb-6 border border-orange-500/30">
                            <div class="flex items-center gap-3 mb-4">
                                <i class="fas fa-fire text-3xl text-orange-400"></i>
                                <h3 class="text-xl font-bold text-white">Forest Weather Index</h3>
                            </div>
                            <div class="text-center py-6">
                                <div id="fwiValue" class="text-7xl font-extrabold bg-gradient-to-r from-orange-400 to-red-500 text-transparent bg-clip-text mb-4">--</div>
                                <div class="text-lg text-slate-300 mb-4">FWI Index</div>
                                <div id="riskLevel" class="inline-block px-6 py-2 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full text-white font-semibold shadow-lg">
                                    Risk Level: --
                                </div>
                            </div>
                            <p class="text-center text-slate-300 text-sm italic mt-4">
                                The FWI provides a numeric rating of fire intensity potential based on weather conditions.
                            </p>
                        </div>

                        <!-- Risk Cards Grid -->
                        <div class="grid grid-cols-2 gap-4 mb-6">
                            <!-- Fire Probability Card -->
                            <div id="fireRisk" class="bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20 text-center transition-all duration-300">
                                <div class="text-4xl mb-3">
                                    <i class="fas fa-percentage"></i>
                                </div>
                                <div id="fireProbability" class="text-4xl font-bold mb-2">--%</div>
                                <div class="text-sm font-semibold text-slate-300 mb-1">Fire Probability</div>
                                <div class="text-xs text-slate-400">Statistical likelihood</div>
                            </div>

                            <!-- Classification Card -->
                            <div id="fireClassification" class="bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20 text-center transition-all duration-300">
                                <div class="text-4xl mb-3">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </div>
                                <div id="fireClass" class="text-4xl font-bold mb-2">--</div>
                                <div class="text-sm font-semibold text-slate-300 mb-1">Classification</div>
                                <div class="text-xs text-slate-400">Binary prediction</div>
                            </div>
                        </div>

                        <!-- Model Info -->
                        <div class="grid grid-cols-2 gap-4">
                            <div class="bg-blue-500/10 border border-blue-500/30 rounded-xl p-4 text-center">
                                <div class="flex items-center justify-center gap-2 text-blue-400 font-semibold mb-2">
                                    <i class="fas fa-robot"></i>
                                    <span>Ridge Regression</span>
                                </div>
                                <div class="text-xs text-slate-400">FWI Index Prediction</div>
                            </div>
                            <div class="bg-purple-500/10 border border-purple-500/30 rounded-xl p-4 text-center">
                                <div class="flex items-center justify-center gap-2 text-purple-400 font-semibold mb-2">
                                    <i class="fas fa-brain"></i>
                                    <span>Logistic Regression</span>
                                </div>
                                <div class="text-xs text-slate-400">Fire Classification</div>
                            </div>
                        </div>
                    </div>

                    <!-- No Results Placeholder -->
                    <div id="noResults" class="text-center py-12">
                        <div class="text-6xl text-cyan-400/50 mb-6">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-white mb-3">No predictions yet</h3>
                        <p class="text-slate-400 mb-8">
                            Train the models and make a prediction to see detailed fire risk analysis
                        </p>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="h-24 bg-white/5 rounded-xl animate-pulse"></div>
                            <div class="h-24 bg-white/5 rounded-xl animate-pulse"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="container mx-auto px-4 py-8 mt-12 text-center text-slate-400">
        <p class="flex items-center justify-center gap-2">
            <i class="fas fa-leaf text-green-400"></i>
            Forest Fire Weather Index Prediction System
            <i class="fas fa-fire text-orange-400"></i>
        </p>
    </footer>

    <script>
        let isModelTrained = false;

        function showMessage(text, type) {
            const messageDiv = document.getElementById('message');
            const bgColor = type === 'success' ? 'bg-emerald-500/20 border-emerald-500/50 text-emerald-300' : 'bg-red-500/20 border-red-500/50 text-red-300';
            const icon = type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle';
            
            messageDiv.innerHTML = `
                <div class="${bgColor} backdrop-blur-md border rounded-xl p-4 flex items-center gap-3 animate-in slide-in-from-left duration-300">
                    <i class="fas ${icon} text-2xl"></i>
                    <span class="font-medium">${text}</span>
                </div>
            `;
            
            setTimeout(() => {
                messageDiv.innerHTML = '';
            }, 5000);
        }

        async function trainModels() {
            showMessage('Training models...', 'success');
            
            try {
                const response = await fetch('/train', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    }
                });
                
                const data = await response.json();
                
                if (data.status === 'success') {
                    isModelTrained = true;
                    showMessage('Models trained successfully! You can now make predictions.', 'success');
                } else {
                    showMessage(data.message, 'error');
                }
            } catch (error) {
                showMessage('Error training models: ' + error.message, 'error');
            }
        }

        async function makePrediction() {
            if (!isModelTrained) {
                showMessage('Please train the models first before making predictions.', 'error');
                return;
            }

            const inputs = {
                temperature: document.getElementById('temperature').value,
                rh: document.getElementById('rh').value,
                ws: document.getElementById('ws').value,
                rain: document.getElementById('rain').value,
                ffmc: document.getElementById('ffmc').value,
                dmc: document.getElementById('dmc').value,
                dc: document.getElementById('dc').value,
                isi: document.getElementById('isi').value,
                bui: document.getElementById('bui').value
            };

            for (const [key, value] of Object.entries(inputs)) {
                if (value === '' || value === null) {
                    showMessage(`Please enter a value for ${key.toUpperCase()}`, 'error');
                    return;
                }
            }

            showMessage('Making prediction...', 'success');

            try {
                const response = await fetch('/predict', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(inputs)
                });

                const data = await response.json();

                if (data.status === 'success') {
                    displayResults(data);
                    showMessage('Prediction completed successfully!', 'success');
                } else {
                    showMessage(data.message, 'error');
                }
            } catch (error) {
                showMessage('Error making prediction: ' + error.message, 'error');
            }
        }

        function displayResults(data) {
            document.getElementById('results').classList.remove('hidden');
            document.getElementById('noResults').classList.add('hidden');

            document.getElementById('fwiValue').textContent = data.fwi_index;
            document.getElementById('riskLevel').textContent = `${data.risk_level} Risk`;
            document.getElementById('fireProbability').textContent = `${data.fire_probability}%`;
            document.getElementById('fireClass').textContent = data.fire_classification.replace(' Risk', '');

            const fireRiskCard = document.getElementById('fireRisk');
            const fireClassCard = document.getElementById('fireClassification');

            fireRiskCard.classList.remove('bg-fire-500/20', 'border-fire-500/50', 'text-fire-400', 'bg-forest-500/20', 'border-forest-500/50', 'text-forest-400');
            fireClassCard.classList.remove('bg-fire-500/20', 'border-fire-500/50', 'text-fire-400', 'bg-forest-500/20', 'border-forest-500/50', 'text-forest-400');

            if (data.fire_classification.includes('Fire Risk')) {
                fireRiskCard.classList.add('bg-fire-500/20', 'border-fire-500/50', 'text-fire-400');
                fireClassCard.classList.add('bg-fire-500/20', 'border-fire-500/50', 'text-fire-400');
                
                if (data.fire_probability > 70) {
                    fireRiskCard.classList.add('pulse-fire');
                    fireClassCard.classList.add('pulse-fire');
                }
            } else {
                fireRiskCard.classList.add('bg-forest-500/20', 'border-forest-500/50', 'text-forest-400');
                fireClassCard.classList.add('bg-forest-500/20', 'border-forest-500/50', 'text-forest-400');
                fireRiskCard.classList.remove('pulse-fire');
                fireClassCard.classList.remove('pulse-fire');
            }
        }
    </script>
</body>
</html>
